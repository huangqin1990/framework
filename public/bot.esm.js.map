{"version":3,"file":"bot.esm.js","sources":["../core/platform.js","../core/runtime.js"],"sourcesContent":["const agentRegExp = /(iOS|Android)MPAdapter\\/(\\d+(\\.?\\d*))(\\(.*\\)|\\/.*)?/;\n\nexport const getPlatformInfo = () => {\n    const platformInfo = { }\n    const execAgent = agentRegExp.exec(navigator.userAgent);\n    platformInfo.platform = execAgent ? execAgent[1].toLowerCase() : 'web';\n    platformInfo.version = execAgent ? execAgent[2] : -1;\n    platformInfo.features = execAgent ? execAgent[4] : '';\n    return platformInfo;\n}","// 初始化后的App对象所需要的运行时环境，包含了一些全局变量和方法，包含平台状态，注册插件等\nimport { getPlatformInfo } from \"./platform\"\n\nconst GlobalAppState = new Map()\n\nexport const createBotApp = () => {\n   const { platform, features, version } = getPlatformInfo()\n   console.log('platform', platform, features, version)\n   // const isReady = () => {\n   //    const iosReady = platform === 'ios' && version >=1 && /mixPMPrompt|usePostMessage/.test(features)\n   //    return iosReady() && window?.webkit?.messageHandlers?.BOTbridge\n   // }\n}\n"],"names":["agentRegExp","getPlatformInfo","platformInfo","execAgent","exec","navigator","userAgent","platform","toLowerCase","version","features","createBotApp","_getPlatformInfo","console","log"],"mappings":";AAAA,IAAMA,WAAW,GAAG,qDAAqD,CAAA;AAElE,IAAMC,eAAe,GAAG,SAAlBA,eAAeA,GAAS;EACjC,IAAMC,YAAY,GAAG,EAAG,CAAA;EACxB,IAAMC,SAAS,GAAGH,WAAW,CAACI,IAAI,CAACC,SAAS,CAACC,SAAS,CAAC,CAAA;AACvDJ,EAAAA,YAAY,CAACK,QAAQ,GAAGJ,SAAS,GAAGA,SAAS,CAAC,CAAC,CAAC,CAACK,WAAW,EAAE,GAAG,KAAK,CAAA;EACtEN,YAAY,CAACO,OAAO,GAAGN,SAAS,GAAGA,SAAS,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAA;EACpDD,YAAY,CAACQ,QAAQ,GAAGP,SAAS,GAAGA,SAAS,CAAC,CAAC,CAAC,GAAG,EAAE,CAAA;AACrD,EAAA,OAAOD,YAAY,CAAA;AACvB,CAAC;;ACTD;IAKaS,YAAY,GAAG,SAAfA,YAAYA,GAAS;AAC/B,EAAA,IAAAC,gBAAA,GAAwCX,eAAe,EAAE;IAAjDM,QAAQ,GAAAK,gBAAA,CAARL,QAAQ;IAAEG,QAAQ,GAAAE,gBAAA,CAARF,QAAQ;IAAED,OAAO,GAAAG,gBAAA,CAAPH,OAAO,CAAA;EACnCI,OAAO,CAACC,GAAG,CAAC,UAAU,EAAEP,QAAQ,EAAEG,QAAQ,EAAED,OAAO,CAAC,CAAA;AACpD;AACA;AACA;AACA;AACH;;;;"}