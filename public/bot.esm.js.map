{"version":3,"file":"bot.esm.js","sources":["../core/platform.js","../core/module/native/camera.js","../core/module/common/index.js","../core/module/native/index.js","../core/module/web/network.js","../core/module/web/index.js","../core/runtime.js","../core/module/index.js","../core/global.js"],"sourcesContent":["const agentRegExp = /(iOS|Android)MPAdapter\\/(\\d+(\\.?\\d*))(\\(.*\\)|\\/.*)?/;\n\nexport const getPlatformInfo = () => {\n    const platformInfo = { }\n    const execAgent = agentRegExp.exec(navigator.userAgent);\n    platformInfo.platform = execAgent ? execAgent[1].toLowerCase() : 'web';\n    platformInfo.version = execAgent ? execAgent[2] : -1;\n    platformInfo.features = execAgent ? execAgent[4] : '';\n    return platformInfo;\n}\n\nexport const isNativePlatform = () => {\n    const { platform } = getPlatformInfo()\n    return platform !== 'web'\n}","export default  {\n    scanCode: () => {}\n}","\nconst registerNativeModuleMap = new WeakMap()\nconst registerWebModuleMap = new WeakMap()\n\n/**\n * 注册模块(域)\n * @param {*} scope \n * @param {*} module { name，callbacks }   \n */\nexport const registerNativeModule = (scope, module) => {\n    // registerModuleMap[scope] = module\n    registerNativeModuleMap.set({ scope }, module)\n}\n\n\nexport const registerWebModule = (scope, module) => {\n    // registerWebModuleMap[scope] = module\n    registerWebModuleMap.set({ scope }, module)\n}\n\n\nexport const getNativeModule = scope => registerNativeModuleMap.get({ scope })\n\nexport const getWebModule = scope => registerWebModuleMap.get({ scope })\n\n","import Camera from \"./camera\"\nimport { registerNativeModule } from \"../common\"\n\n/**\n * 注册模块(域)\n * 如果只有原生模块实现，那么就不需要注册web模块\n */\nexport const registerAllNativeModule = () => { \n    console.log('注册原生模块')\n    registerNativeModule('Camera', Camera)\n}\n","\n\n\nexport default {\n    request: () => {\n        console.log('请求咯')\n    }\n}","import { registerWebModule } from \"../common\";\nimport Network from \"./network\";\n\nexport const registerAllWebModule = () => {\n    console.log('注册web模块')\n    registerWebModule('Network', Network)\n}","// 初始化后的App对象所需要的运行时环境，包含了一些全局变量和方法，包含平台状态，注册插件等\nimport { getPlatformInfo } from \"./platform\"\nimport { registerAllModule } from \"./module\"\n// import androidBridge from './bridge/android'\n// import iosBridge from './bridge/ios'\n// import webBridge from './bridge/web'\n\nexport const GlobalAppState = {\n   currentPlatform: 'web'\n }\n\n /** 获取平台，加载平台对应资源\n  * 注册模块通讯\n  * 注册回调函数\n  * @returns \n  */\nexport const createBotApp = () => {\n   const { platform, features, version } = getPlatformInfo()\n   console.log('platform', platform)\n   GlobalAppState.platform = platform\n   const bot = window.BOT || {}\n   registerAllModule()\n   return bot\n}\n\nexport const initBotGlobal = () => (window.BOT = createBotApp())\n\n","import { registerAllNativeModule } from \"./native\";\nimport { registerAllWebModule } from \"./web\";\nimport { getPlatformInfo } from \"../platform\";\n\nexport const registerAllModule = () => {\n    getPlatformInfo().platform === 'web' ? registerAllWebModule() : registerAllNativeModule()\n}","import { initBotGlobal } from \"./runtime\";\n\nexport const Bot = initBotGlobal()\n\nexport const registerModule = Bot.registerModule\n\nexport const registerWebModule = Bot.registerWebModule\n\nexport const Plugins = Bot.Plugins"],"names":["agentRegExp","getPlatformInfo","platformInfo","execAgent","exec","navigator","userAgent","platform","toLowerCase","version","features","Camera","scanCode","registerNativeModuleMap","WeakMap","registerWebModuleMap","registerAllNativeModule","scope","module","console","log","set","Network","request","registerAllWebModule","createBotApp","bot","window","BOT","Bot","registerModule","registerWebModule","Plugins"],"mappings":";AAAA,IAAMA,EAAc,sDAEPC,EAAkB,WAC3B,IAAMC,EAAe,CAAA,EACfC,EAAYH,EAAYI,KAAKC,UAAUC,WAI7C,OAHAJ,EAAaK,SAAWJ,EAAYA,EAAU,GAAGK,cAAgB,MACjEN,EAAaO,QAAUN,EAAYA,EAAU,IAAM,EACnDD,EAAaQ,SAAWP,EAAYA,EAAU,GAAK,GAC5CD,CACX,ECTA,MAAgBS,EAAA,CACZC,SAAU,WAAO,GCArB,IAAMC,EAA0B,IAAIC,QAC9BC,EAAuB,IAAID,QCKpBE,EAA0B,WDEH,IAACC,EAAOC,ECDxCC,QAAQC,IAAI,UDCqBH,ECAZ,SDAmBC,ECATP,EDE/BE,EAAwBQ,IAAI,CAAEJ,MAAAA,GAASC,ECD3C,ECPA,MAAeI,EAAA,CACXC,QAAS,WACLJ,QAAQC,IAAI,MAChB,GCHG,IAAMI,EAAuB,WHYH,IAACP,EAAOC,EGXrCC,QAAQC,IAAI,WHWkBH,EGVZ,UHUmBC,EGVRI,EHY7BP,EAAqBM,IAAI,CAAEJ,MAAAA,GAASC,EGXxC,ECUaO,EAAe,WACzB,IAAQlB,EAAgCN,IAAhCM,SACRY,QAAQC,IAAI,WAAYb,GAExB,IAAMmB,EAAMC,OAAOC,KAAO,GAE1B,MCjBgC,QAA/B3B,IAAkBM,SAAqBiB,IAAyBR,IDiB1DU,CACV,EErBaG,EFuBuBF,OAAOC,IAAMH,IErBnBI,EAAIC,eAEDD,EAAIE,kBAEdF,EAAIG"}